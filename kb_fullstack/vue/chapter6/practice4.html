<!-- 맛집 목록 데이터는 name, reviews(배열), isFavorite 속성을 포함한다.
페이지 상단에는 v-for로 맛집 리스트를 카드 형태로 출력한다.
각 카드의 오른쪽 상단에는 즐겨찾기 아이콘(bookmark) 표시:
즐겨찾기 상태일 때: fa-solid fa-bookmark text-warning
즐겨찾기 아닐 때: fa-regular fa-bookmark text-secondary
즐겨찾기 아이콘 클릭 시 isFavorite 값이 토글(toggle)된다.
@click.stop으로 부모 요소 클릭 이벤트 전파는 막는다.
즐겨찾기된 항목의 카드에는 금색 테두리(border) 와 그림자 효과(favorite-border 클래스)를 적용한다.
즐겨찾기되지 않은 항목은 회색 테두리(default-border 클래스)를 적용한다.
각 카드에는 다음 정보가 표시된다:
맛집 이름
평균 평점 (소수점 둘째자리까지)
리뷰 개수
리스트 출력 아래에는 즐겨찾기 목록 섹션을 따로 만든다.
즐겨찾기 목록에는 즐겨찾기된 항목만 필터링해서 출력한다. (computed 속성 사용)
즐겨찾기 항목이 없을 때는 "즐겨찾기한 맛집이 없습니다 :미소짓는_상기된_얼굴:" 메시지를 보여준다. -->

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue.js Framework</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
      li {
        list-style: none;
      }
      .favorite-border {
        border: 3px solid gold;
        box-shadow: 0 0 10px gold;
      }
      .default-border {
        border: 1px solid gray;
      }
      .pointer {
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div id="app" class="container">
      <h2>세종대 맛집 즐겨찾기 기능 🥄</h2>
      <ul class="row">
        <li class="col-md-4 p-2" v-for="(restaurant, idx) in restaurants">
          <div
            class="rounded p-4"
            :class="restaurant.isFavorite ? 'favorite-border' : 'default-border'"
          >
            <div class="d-flex justify-content-between">
              <h4>{{restaurant.name}}</h4>
              <i
                class="fa-bookmark pointer"
                :class="restaurant.isFavorite ? 'fa-solid text-warning' : 'fa-regular text-secondary'"
                @click.stop="onToggleFavorite(idx)"
              ></i>
            </div>

            <p>
              <i class="fa-solid fa-star text-warning"></i> 평균 평점 :
              {{getAverageScore(restaurant.reviews)}}
            </p>
            <p>
              <i class="fa-solid fa-comment text-secondary"></i> 리뷰 수 : {{
              restaurant.reviews.length }}
            </p>
          </div>
        </li>
      </ul>
      <hr />
      <h2>⭐ 즐겨찾기 목록</h2>
      <div v-if="favorites.length > 0">
        <ul class="row">
          <li class="col-md-4 p-2" v-for="restaurant in favorites">
            <div
              class="rounded p-4"
              :class="restaurant.isFavorite ? 'favorite-border' : 'default-border'"
            >
              <div class="d-flex justify-content-between">
                <h4>{{restaurant.name}}</h4>
              </div>

              <p>
                <i class="fa-solid fa-star text-warning"></i> 평균 평점 :
                {{getAverageScore(restaurant.reviews)}}
              </p>
              <p>
                <i class="fa-solid fa-comment text-secondary"></i> 리뷰 수 : {{
                restaurant.reviews.length }}
              </p>
            </div>
          </li>
        </ul>
      </div>
      <div v-else class="container-fluid mt-5 d-flex justify-content-center">
        <p>즐겨찾기한 맛집이 없습니다. 😊</p>
      </div>
    </div>

    <script src="https://unpkg.com/vue"></script>
    <script>
      let vm = Vue.createApp({
        name: 'App',
        data() {
          return {
            restaurants: [
              { name: '빠오즈푸', reviews: [4.7, 4.8, 4.6], isFavorite: false },
              { name: '시홍쓰', reviews: [4.2, 4.0, 4.1], isFavorite: false },
              {
                name: '오사이초밥',
                reviews: [3.7, 3.6, 3.8, 3.3],
                isFavorite: false,
              },
              {
                name: '은혜즉석떡볶이',
                reviews: [4.5, 2, 1],
                isFavorite: false,
              },
              {
                name: '우화등선',
                reviews: [3.2, 3.4, 3.1, 2.6, 4],
                isFavorite: false,
              },
              { name: '세종원', reviews: [3.9, 4.0, 3.8], isFavorite: false },
            ],
          };
        },
        methods: {
          getAverageScore(reviews) {
            const sum = reviews.reduce((acc, cur) => acc + cur, 0);
            return (sum / reviews.length).toFixed(2);
          },
          onToggleFavorite(idx) {
            this.restaurants[idx].isFavorite =
              !this.restaurants[idx].isFavorite;
          },
        },
        computed: {
          favorites() {
            return this.restaurants.filter(
              (restaurant) => restaurant.isFavorite
            );
          },
        },
      }).mount('#app');
    </script>
  </body>
</html>
